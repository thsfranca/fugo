(macro defn [name params body]
  (def ~name (fn ~params ~body)))

(import "net/http")
(import "github.com/gorilla/mux")
(import "fmt")

(defn hello-handler [w r]
  (.WriteString w "Hello from Vex HTTP Server using defn macro!"))

(defn status-handler [w r]
  (.WriteString w "{\"status\": \"ok\", \"server\": \"vex\"}"))

(def router (.NewRouter mux))
(.HandleFunc router "/" hello-handler)
(.HandleFunc router "/status" status-handler)

(fmt.Println "ðŸš€ Vex HTTP Server with defn macro starting on :8080...")
(.ListenAndServe http ":8080" router)